<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset=utf-8>
  <meta content="IE=edge" http-equiv=X-UA-Compatible>
  <meta content="width=device-width,initial-scale=1" name=viewport>
  <meta content="Grails 3 Book - The first book dedicated to Grails 3" name="description">
  <meta content="Eric Helgeson" name="author">
  <title>Grails 3.3.x Upgrade Notes</title>
  <link rel="shortcut icon" href="../../favicon.ico">

  <!--[if lt IE 9]>
  <script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script>
  <script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script>
  <![endif]-->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

  <link href="../../css/asciidoctor.css" rel="stylesheet">
  <link href="../../css/base.css" rel="stylesheet">
  <link href="../../css/prettify.css" rel="stylesheet">

  <link href="../../css/style.css" rel="stylesheet">

</head>
<body>


  <header id="marketing" style="min-height: auto;">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <div class="header-inner" style="border-bottom: 0px">
          <a class="logo pull-left" href="/">Practical Grails 3</a>
          <div class="header-icons text-right pull-right">
            <a href="/blog.html" about="_blank" alt="Blog"><i class="fa fa-newspaper-o" aria-hidden="true"></i></a>
            <a href="https://gitlab.com/grails-3-book/" about="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
            <a href="https://twitter.com/grails3book" about="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="mailto:info@grails3book.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <section id="author" class="sec-wrap">
    <div class="container">
      <div class="row">
        <!--col-xs-12-->
        <div class="col-xs-12">
          <div class="media">
            <div class="media-body">
                <h2>Grails 3.3.x Upgrade Notes</h2>
                <hr style="margin:0px;"/>
                <p><small><em>March 24, 2018</em></small></p>
                <p><div class="sect1">
<h2 id="current_release_3_3_3">Current Release - 3.3.3</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong><strong>3.3.0 - 07/26/2017</strong></strong></p>
</li>
<li>
<p><strong><strong>3.3.0.RC1 - Current release 06/26/2017</strong></strong></p>
</li>
<li>
<p><strong><strong>3.3.0.M2 - Current release 05/30/2017</strong></strong></p>
</li>
<li>
<p><strong><strong>3.3.0.M1 - Released 05/09/2017</strong></strong></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have anything to add, please let me know! <a href="mailto:info@grails3book.com">info@grails3book.com</a>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="documentation">Documentation</h3>
<div class="paragraph">
<p>Whats new in Grails</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.grails.org/3.3.x/guide/introduction.html#whatsNew" class="bare">http://docs.grails.org/3.3.x/guide/introduction.html#whatsNew</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whats new in GORM 6.1 (Default in 3.3)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://gorm.grails.org/6.1.x/whatsNew/manual/" class="bare">http://gorm.grails.org/6.1.x/whatsNew/manual/</a></p>
</li>
<li>
<p><a href="http://gorm.grails.org/latest/hibernate/manual/index.html#upgradeNotes" class="bare">http://gorm.grails.org/latest/hibernate/manual/index.html#upgradeNotes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upgrading from 3.2.x to 3.3</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.grails.org/3.3.x/guide/upgrading.html" class="bare">http://docs.grails.org/3.3.x/guide/upgrading.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Fresh app diffs 3.2.11 &#8594; 3.3.3</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/erichelgeson/grails-versions/compare/3.2.11&#8230;&#8203;3.3.3" class="bare">https://github.com/erichelgeson/grails-versions/compare/3.2.11&#8230;&#8203;3.3.3</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="notable_changes">Notable changes</h3>
<div class="ulist">
<ul>
<li>
<p>New Trait based testing framework</p>
<div class="ulist">
<ul>
<li>
<p>Docs <a href="https://testing.grails.org/latest/guide/index.html" class="bare">https://testing.grails.org/latest/guide/index.html</a></p>
</li>
<li>
<p>Can still use the old <code>@TestFor</code> annotations with</p>
</li>
<li>
<p><code>testCompile "org.grails:grails-test-mixins:3.3.0"</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Spring Boot 1.5.8</p>
</li>
<li>
<p>Autowire of domain classes off by default (since 3.2.9)</p>
<div class="ulist">
<ul>
<li>
<p>can be enabled per domain now if required in 3.3</p>
</li>
<li>
<p><code>static mapping = { autowire true }</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Improved support for Multi-tenancy in GORM &amp; GORM data services</p>
</li>
<li>
<p>Distribution and Packaging sizes [greatly reduced](<a href="https://twitter.com/grailsframework/status/862196110076641280" class="bare">https://twitter.com/grailsframework/status/862196110076641280</a>).</p>
</li>
<li>
<p>Unified and pluggable events/async - breaking change to pervious async</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://async.grails.org/latest/guide/index.html" class="bare">http://async.grails.org/latest/guide/index.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Transactional &amp; ReadOnly annotations moved to GORM</p>
<div class="ulist">
<ul>
<li>
<p>Update all imports &amp; annotations with</p>
</li>
<li>
<p><code>grep -rl 'grails.transaction.Transactional' . | xargs sed -i '' -e 's/grails.transaction.Transactional/grails.gorm.transactions.Transactional/g'</code></p>
</li>
<li>
<p><code>grep -rl '@Transactional(readOnly=true)' . | xargs sed -i '' -e 's/@Transactional(readOnly=true)/@ReadOnly/g'</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Logger names changed for Grails artefacts</p>
<div class="ulist">
<ul>
<li>
<p>Now simply use package names</p>
</li>
<li>
<p><a href="http://docs.grails.org/latest/guide/conf.html#loggerName" class="bare">http://docs.grails.org/latest/guide/conf.html#loggerName</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>New default dependancies</p>
<div class="ulist">
<ul>
<li>
<p>Artefacts like controllers and services may not work properly if not included</p>
</li>
<li>
<p>See diff <a href="https://github.com/erichelgeson/grails-versions/compare/3.2.11&#8230;&#8203;3.3.2#diff-0a2349eea38294b2043ce02124b37cb3" class="bare">https://github.com/erichelgeson/grails-versions/compare/3.2.11&#8230;&#8203;3.3.2#diff-0a2349eea38294b2043ce02124b37cb3</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="known_issues">Known Issues</h3>
<div class="ulist">
<ul>
<li>
<p><code>grails-spring-security-oauth2-provider</code> (Filters)</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/bluesliverx/grails-spring-security-oauth2-provider/issues/140" class="bare">https://github.com/bluesliverx/grails-spring-security-oauth2-provider/issues/140</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resolved_issues">Resolved Issues</h3>
<div class="ulist">
<ul>
<li>
<p><strong>IMPORTANT</strong> Quartz job property changes</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/grails-plugins/grails-quartz/issues/91" class="bare">https://github.com/grails-plugins/grails-quartz/issues/91</a></p>
</li>
<li>
<p>Jobs will just not run silently if the properties are not changed from <code>def</code> to <code>static</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>build-test-data</p>
<div class="ulist">
<ul>
<li>
<p>Use 3.3.0.RC1+ - with new Trait framework.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Spring-Session (redis)</p>
<div class="ulist">
<ul>
<li>
<p>Dependancy changes</p>
</li>
<li>
<p><code>compile "org.springframework.session:spring-session-data-redis"</code></p>
</li>
<li>
<p>(work around) Autoconfigure did not work - had to set <code>spring.session.'store-type' = 'redis'</code> in application.groovy/yml</p>
</li>
</ul>
</div>
</li>
<li>
<p>Startup issue when using <code>grails-spring-websocket</code></p>
<div class="ulist">
<ul>
<li>
<p><code>Field springTaskExecutor in org.grails.events.bus.spring.EventBusFactoryBean required a single bean, but 4 were found</code></p>
</li>
<li>
<p><a href="https://github.com/grails/grails-async/issues/4" class="bare">https://github.com/grails/grails-async/issues/4</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Spring-Security core updated for Grails 3.3</p>
<div class="ulist">
<ul>
<li>
<p>Change to <code>compile 'org.grails.plugins:spring-security-core:3.2.0'</code></p>
</li>
<li>
<p><a href="https://github.com/grails-plugins/grails-spring-security-core/pull/491" class="bare">https://github.com/grails-plugins/grails-spring-security-core/pull/491</a></p>
</li>
<li>
<p>Due to breaking change in spring-boot 1.5</p>
</li>
</ul>
</div>
</li>
<li>
<p>GrailsCompileStatic &amp; CompileStatic throw exception in valid uses</p>
<div class="ulist">
<ul>
<li>
<p>Add <code>compile "org.grails.plugins:events:3.3.0.RC1"</code> to work around</p>
</li>
<li>
<p><a href="https://github.com/grails/grails-core/issues/10638" class="bare">https://github.com/grails/grails-core/issues/10638</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Sentry plugin <code>FilterRegistrationBean</code> package changed</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/agorapulse/grails-sentry/issues/28" class="bare">https://github.com/agorapulse/grails-sentry/issues/28</a></p>
</li>
<li>
<p>Use <code>compile 'org.grails.plugins:sentry:8.0.3'</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <p class="text-center">&copy; <a href="mailto:info@grails3book.com">Eric Helgeson</a>, Pratical Grails 3. All rights reserved. <a href="/blog.html">Blog</a> </p>
        </div>
      </div>
    </div>
  </footer>
  </div>
  </body>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="../../js/ga.js"></script>
  <script src="../../js/prettify.js"></script>
</html>

